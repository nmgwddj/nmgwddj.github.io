<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Dylan&#39;s blog</title>
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url(https://avatars.githubusercontent.com/u/13995319?v=4)">
        </div>
    </section>
    <section class='menu'>
        <div>Dylan&#39;s blog</div>
        
            <div>To the pursuit of truth.</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
    <header class='PageTitle'>
        <h1>{ Linux/Unix }</h1>
    </header>
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/01/02/2016/2016-01-02_212834-1398/">Mac OS X EI Capitan 修改截图的默认文件名</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-01-02T21:28:34.000Z" itemprop="datePublished">
    2016-01-02
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Mac-OS-X/">Mac OS X</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>从我用 Mac OS X 开始，就已经是 EI Capitan 了，并没有用过以前老版本的 Mac OS X 系统，最近想修改一下截图时保存的文件名，默认为 <code>屏幕快照 2016-01-01 17.24.08.png</code> 形式的，我想修改为 <code>2016-01-01_17.24.08.png</code> 这种形式，去掉前面的中文，然后把中文与日期中间的空格去掉，并且日期和时间中间的空格也替换为下划线。因为我经常需要将图片上传到博客，如果出现中或者空格，就会有转义字符，这样会导致图片的 URL 非常的长。</p>
        
          <div class="more-link">
            <a href="/2016/01/02/2016/2016-01-02_212834-1398/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/11/17/2015/2015-11-17_120727-1162/">ngrok 实现微信公共号开发本地调试</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-11-17T12:07:27.000Z" itemprop="datePublished">
    2015-11-17
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <h2 id="微信开发团队已经提供“微信开发者工具”，本文内容已经落后，请开发者选择“微信开发者工具”。"><a href="#微信开发团队已经提供“微信开发者工具”，本文内容已经落后，请开发者选择“微信开发者工具”。" class="headerlink" title="微信开发团队已经提供“微信开发者工具”，本文内容已经落后，请开发者选择“微信开发者工具”。"></a>微信开发团队已经提供“微信开发者工具”，本文内容已经落后，请开发者选择“微信开发者工具”。</h2><p>你是否遇到过这样的问题？在微信公共号开发过程中，有一些诸如获取用户身份等信息的代码必须要再微信客户端打开连接测试，而且微信后台获取用户信息时必须设置一个安全域名，这个域名指定到一个我们暴露在外网的服务器上才可以正常使用。而我们编写代码的环境<strong>往往是本机</strong>，很少有直接连接服务器用 vi 编写代码的场景，一般情况都是本地修改好代码，把代码通过 FileZilla 等类似的工具把代码传到服务器上，或者把代码提交到 github 上，再到服务器把最新的代码 pull 下来测试。对熟悉微信公共号开发的人来说也许还好，但是对于一个刚刚接触微信公共号开发的人可能这个测试的过程要来回重复十几次才能把代码跑通，而这只是其中一个获取用户身份的功能，调用 JS SDK 等等都需要在服务器环境测试，这个过程是很折磨人的。 类似上面的问题，我想了很多办法，比如用 atom remote sync 插件、自动同步代码到服务器等等思路，最终还是有各种小问题折磨着我。<strong>如果能实现手机微信公共号跳转的页面直接访问的是我们编程环境的电脑，代码修改后只需要等待服务端重新编译，手机端就可以直接测试效果，这样岂不是方便很多？</strong></p>
        
          <div class="more-link">
            <a href="/2015/11/17/2015/2015-11-17_120727-1162/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/10/30/2015/2015-10-30_135053-980/">保持 ssh 连接不断线</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-10-30T13:50:53.000Z" itemprop="datePublished">
    2015-10-30
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>修改 ssh 配置文件 &#x2F;etc&#x2F;ssh&#x2F;sshd_config，添加或者修改 ClientAliveInterval为 “ClientAliveInterval 60”。这个参数的是意思是每1分钟，服务器向客户端发一个消息，用于保持连接。保存后记得重启ssh服务。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/10/22/2015/2015-10-22_212146-973/">Mac OS X 安装 Consolas 字体</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-10-22T21:21:46.000Z" itemprop="datePublished">
    2015-10-22
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>以前有朋友介绍 Consolas 字体，用了以后一下就爱上了，最近一段时间用 Mac 笔记本，发现 Mac OS 系统里面没有这个字体，所以要自己安装，以下是在网络上搜索的方法，原文地址：<a target="_blank" rel="noopener" href="http://blog.ikato.com/post/15675823000/how-to-install-consolas-font-on-mac-os-x">http://blog.ikato.com/post/15675823000/how-to-install-consolas-font-on-mac-os-x</a></p>
        
          <div class="more-link">
            <a href="/2015/10/22/2015/2015-10-22_212146-973/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/10/17/2015/2015-10-17_213402-971/">解决 ubuntu 新建用户 sudo 命令提示密码错误</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-10-17T21:34:02.000Z" itemprop="datePublished">
    2015-10-17
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>在 ubuntu 下新建用户后，直接使用 sudo 命令是无法使用的，需要切换到管理员身份，在 sudo 的配置文件中加入新建用户的用户名，这样新用户才能正常使用 sudo 命令。具体方法如下</p>
        
          <div class="more-link">
            <a href="/2015/10/17/2015/2015-10-17_213402-971/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/10/13/2015/2015-10-13_102803-966/">aliyun ubuntu 安装 meteor 运行环境</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-10-13T10:28:03.000Z" itemprop="datePublished">
    2015-10-13
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/meteor/">meteor</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>阿里云服务器买回来是没有安装 curl 这个工具的，需要我们自己手动安装。你可以到 <a target="_blank" rel="noopener" href="http://curl.haxx.se/download.html">curl 官网</a> 下载源码包安装，也可以使用本文提供的简单的 apt-get 方法安装。</p>
<p>$ sudo apt-get update<br>$ sudo apt-get install curl<br>$ curl <a target="_blank" rel="noopener" href="https://install.meteor.com/">https://install.meteor.com/</a>  sh</p>
<p>上面命令执行完成后开始安装 meteor</p>
<p>$ curl <a target="_blank" rel="noopener" href="https://install.meteor.com/">https://install.meteor.com/</a>  sh<br>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>                                 Dload  Upload   Total   Spent    Left  Speed<br>100  6121    0  6121    0     0   3507      0 –:–:–  0:00:01 –:–:–  3507<br>Downloading Meteor distribution<br>######################################################################## 100.0%</p>
<p>Meteor 1.2.0.2 has been installed in your home directory (~&#x2F;.meteor).<br>Writing a launcher script to &#x2F;usr&#x2F;local&#x2F;bin&#x2F;meteor for your convenience.<br>This may prompt for your password.<br>sudo: unable to resolve host aliyun</p>
<p>To get started fast:</p>
<p>  $ meteor create ~&#x2F;my_cool_app<br>  $ cd ~&#x2F;my_cool_app<br>  $ meteor</p>
<p>Or see the docs at:</p>
<p>  docs.meteor.com</p>
<p>看到如上提示就是已经下载并部署完成了，我们来创建一个 meteor example 测试一下是否可以正常访问了。</p>
<p>$ meteor create –example todos<br>Created a new Meteor app in ‘todos’.          </p>
<p>To run your new app:<br>  cd todos<br>  meteor                                      </p>
<p>If you are new to Meteor, try some of the learning resources here:<br>  <a target="_blank" rel="noopener" href="https://www.meteor.com/learn">https://www.meteor.com/learn</a></p>
<p>上面是创建了一个 meteor 内置的示例，名字叫 todos，创建完成后进入 todos 文件夹运行 meteor 命令。</p>
<p>$ cd todos<br>$ meteor<br>[[[[[ ~&#x2F;project&#x2F;todos ]]]]]                   </p>
<p>&#x3D;&gt; Started proxy.<br>&#x3D;&gt; Started MongoDB.<br>&#x3D;&gt; Started your app.                          </p>
<p>&#x3D;&gt; App running at: <a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000/</a></p>
<p>运行 meteor 命令后提示应用程序运行在 <a target="_blank" rel="noopener" href="http://localhost:3000/">http://localhost:3000/</a> 可以访问试一下吧。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/09/08/2015/2015-09-08_232027-938/">阿里云 ubuntu-x64 python+django+mysql 开发环境搭建</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-09-08T23:20:27.000Z" itemprop="datePublished">
    2015-09-08
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/django/">django</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/Python/">Python</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>本文主要记录使用阿里云搭建 python+django+mysql 的开发环境，因为中间自己遇到了不少问题，整理了正确的步骤避免大家再碰壁而浪费时间。应该把精力花再更有价值的地方。</p>
<p>阿里云服务器已经预装好了 python2.7.6，所以我们无需再次安装  </p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">root@aliyun:~<span class="comment"># python</span></span><br><span class="line">Python 2.7.6 (default, Mar 22 2014, 22:59:56) </span><br><span class="line">\[GCC 4.8.2\] on linux2</span><br><span class="line">Type <span class="string">&quot;help&quot;</span>, <span class="string">&quot;copyright&quot;</span>, <span class="string">&quot;credits&quot;</span> or <span class="string">&quot;license&quot;</span> <span class="keyword">for</span> more information.</span><br></pre></td></tr></table></figure>

<p>首先执行一下 apt-get update 命令来更新一下数据源，避免本地有些软件的地址是错误的导致安装过程中404错误。</p>
<p>mycode@aliyun:~$ sudo apt-get update</p>
<p>配置虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:~$ sudo apt-get install python-virtualenv</span><br><span class="line">mycode@aliyun:~$ sudo easy\_install virtualenvwrapper</span><br><span class="line">mycode@aliyun:~$ <span class="built_in">mkdir</span> <span class="variable">$HOME</span>/.virtualenvs</span><br><span class="line">mycode@aliyun:~$ <span class="built_in">echo</span> <span class="built_in">export</span> WORKON\_HOME=<span class="variable">$HOME</span>/.virtualenvs &gt;&gt; ~/.bashrc</span><br><span class="line">mycode@aliyun:~$ <span class="built_in">echo</span> <span class="built_in">source</span> /usr/local/bin/virtualenvwrapper.sh &gt;&gt; ~/.bashrc</span><br></pre></td></tr></table></figure>

<p>断开终端连接，使用相同用户重新登录，创建虚拟环境</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:~$ mkvirtualenv webchat</span><br><span class="line">New python executable <span class="keyword">in</span> webchat/bin/python</span><br><span class="line">Installing setuptools, pip...done.</span><br><span class="line">(webchat)mycode@aliyun:~$</span><br></pre></td></tr></table></figure>

<p>使用 <strong>mkvirtualenv [虚拟环境名称]</strong> 命令创建虚拟环境后，命令行会直接切换到 webchat 的虚拟环境，在这个虚拟环境中安装的软件需要使用 pip 命令，并且安装的软件并不会在真实系统中，要退出虚拟环境，使用 deactivate 命令，要删除虚拟环境，使用 rmvirtualenv 命令。</p>
<p>在安装 django 环境前，我们还需要安装几个必须的组件。</p>
<p>1、mysql-server</p>
<p>2、mysql-client</p>
<p>3、python-dev</p>
<p>4、libxml2-dev</p>
<p>5、libxslt-dev</p>
<p>6、zlib1g-dev</p>
<p>7、libmysqld-dev</p>
<p>8、<code>libjpeg-dev</code></p>
<p>9、libpcre3</p>
<p>10、libpcre3-dev</p>
<p>在非虚拟环境中，执行如下命令安装我们必备的组件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:~$ sudo apt-get install mysql-server mysql-client python-dev libxml2-dev libxslt-dev zlib1g-dev libmysqld-dev libjpeg-dev</span><br></pre></td></tr></table></figure>

<p>切换到虚拟环境中安装 django 所需的各种组件，这些组件不会被直接安装到系统，因为可能每个项目所需这些组件的版本号不同，所以只在虚拟环境中安装，执行如下命令。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(webchat)mycode@aliyun:~$ pip install Django ipdb ipython lxml MySQL-python Pillow wheel djangorestframework httplib2 requests uWSGI wechat-sdk</span><br></pre></td></tr></table></figure>

<p>创建新的 django 项目</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(webchat)mycode@aliyun:~$ django-admin startproject itcast\_webchat</span><br></pre></td></tr></table></figure>

<p>设置使用 mysql 数据库，进入django开发目录（itcast_webchat&#x2F;itcast_webchat&#x2F;settings.py），编辑 setting.py 配置文件，将如下内容注释</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#DATABASES = &#123;</span><br><span class="line"># &#x27;default&#x27;: &#123;</span><br><span class="line"># &#x27;ENGINE&#x27;: &#x27;django.db.backends.sqlite3&#x27;,</span><br><span class="line"># &#x27;NAME&#x27;: os.path.join(BASE\_DIR, &#x27;db.sqlite3&#x27;),</span><br><span class="line"># &#125;</span><br><span class="line">#&#125;</span><br></pre></td></tr></table></figure>

<p>添加 mysql 的设置信息，添加完成后会使用 mysql 数据库，要注意，里面设置的 dbname 必须存在，否则你生成数据表的时候会报错找不到这个数据库</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">DATABASES <span class="operator">=</span> &#123;</span><br><span class="line">    <span class="string">&#x27;default&#x27;</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ENGINE&#x27;</span>: <span class="string">&#x27;django.db.backends.mysql&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;NAME&#x27;</span>: <span class="string">&#x27;dbname&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;USER&#x27;</span>: <span class="string">&#x27;root&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PASSWORD&#x27;</span>: <span class="string">&#x27;password&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;HOST&#x27;</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;PORT&#x27;</span>: <span class="string">&#x27;3306&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>生成相关数据表</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(webchat)mycode@aliyun:~$ <span class="built_in">cd</span> itcast\_webchat/</span><br><span class="line">(webchat)mycode@aliyun:~/itcast\_webchat$ python manage.py migrate</span><br><span class="line">Operations to perform:</span><br><span class="line">Apply all migrations: admin, contenttypes, auth, sessions</span><br><span class="line">Running migrations:</span><br><span class="line">Applying contenttypes.0001\_initial... OK</span><br><span class="line">Applying auth.0001\_initial... OK</span><br><span class="line">Applying admin.0001\_initial... OK</span><br><span class="line">Applying sessions.0001\_initial... OK</span><br></pre></td></tr></table></figure>

<p>启动 django 服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">(webchat)mycode@aliyun:~/itcast\_webchat$ python manage.py runserver</span><br><span class="line">Performing system checks...</span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">System check identified no issues (0 silenced).</span><br><span class="line">September 08, 2015 - 14:34:31</span><br><span class="line">Django version 1.7.8, using settings <span class="string">&#x27;itcast\_webchat.settings&#x27;</span></span><br><span class="line">Starting development server at http://127.0.0.1:8000/</span><br><span class="line">Quit the server with CONTROL-C.</span><br></pre></td></tr></table></figure>

<p>配置 django 关闭调试并设定可以让所有 IP 访问，进入django开发目录（itcast_webchat&#x2F;itcast_webchat&#x2F;settings.py），编辑 setting.py 配置文件，修改如下两个配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TEMPLATE\_DEBUG = False</span><br><span class="line">ALLOWED\_HOSTS = \[&#x27;\*&#x27;,\]</span><br></pre></td></tr></table></figure>

<p>安装 nginx-1.6.2，将 nginx-1.6.2 的压缩包上传到 linux 服务器或者直接从服务器上下载</p>
<p>解压 nginx 安装包</p>
<p>tar zxvf nginx-1.6.2.tar.gz</p>
<p>cd 进入解压后的 nginx 目录，安装所需组件</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:/home/mycode/package/nginx-1.6.2$ sudo apt-get install libpcre3 libpcre3-dev</span><br><span class="line">mycode@aliyun:/home/mycode/package/nginx-1.6.2$ sudo apt-get install libssl-dev</span><br><span class="line">mycode@aliyun:/home/mycode/package/nginx-1.6.2$ sudo apt-get install openssl</span><br></pre></td></tr></table></figure>

<p>执行 nginx 目录下的 configure 执行文件，该文件有两个作用，一个是环境检查，另外一个是生成 makefile</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:/home/mycode/package/nginx-1.6.2$ ./configure</span><br></pre></td></tr></table></figure>

<p>编译并安装 nginx</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:/home/mycode/package/nginx-1.6.2$ make</span><br><span class="line">mycode@aliyun:/home/mycode/package/nginx-1.6.2$ sudo make install</span><br></pre></td></tr></table></figure>

<p>配置 nginx 反向代理，使用 VIM 编辑 &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;nginx.conf 文件，将如下行注释</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#location / &#123; </span><br><span class="line">#   root html; </span><br><span class="line">#   index index.html index.htm; </span><br><span class="line">#&#125;</span><br></pre></td></tr></table></figure>

<p>添加如下内容到被注释的文字后面，注意粗体标注的位置要改成你自己 django 启动时的地址</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">    #Django address</span><br><span class="line">    proxy\_pass http://localhost:8000;</span><br><span class="line"></span><br><span class="line">    #Proxy Settings</span><br><span class="line">    proxy\_redirect off;</span><br><span class="line">    proxy\_set\_header Host $host;</span><br><span class="line">    proxy\_set\_header X-Real-IP $remote\_addr;</span><br><span class="line">    proxy\_set\_header X-Forwarded-For $proxy\_add\_x\_forwarded\_for;</span><br><span class="line">    proxy\_next\_upstream error timeout invalid\_header http\_500 http\_502 http\_503 http\_504;</span><br><span class="line">    proxy\_max\_temp\_file\_size 0;</span><br><span class="line">    proxy\_connect\_timeout 90;</span><br><span class="line">    proxy\_send\_timeout 90;</span><br><span class="line">    proxy\_read\_timeout 90;</span><br><span class="line">    proxy\_buffer\_size 4k;</span><br><span class="line">    proxy\_buffers 4 32k;</span><br><span class="line">    proxy\_busy\_buffers\_size 64k;</span><br><span class="line">    proxy\_temp\_file\_write\_size 64k;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>启动 nginx 服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mycode@aliyun:~$ /usr/local/nginx/sbin/nginx</span><br></pre></td></tr></table></figure>

<p>访问你阿里云的外网 IP 地址，如果你看到了 It worked! 就是成功了。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/07/18/2015/2015-07-18_215259-790/">Linux/unix下的IPC-UNIX Domain Socket</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-07-18T21:52:59.000Z" itemprop="datePublished">
    2015-07-18
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E7%BD%91%E7%BB%9C/">网络</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>UNIX Domain Socket 是基于socket发展而来的，是linux&#x2F;unix下一种IPC（Inter-Process Communication 进程间通讯）机制，它无需向内核网络协议栈一样拆包打包，只是将数据从一个进程拷贝到另外一个进程。在这种模式下，无论使用 SOCKET_STREAM 还是 SOCKET_DGRAM 都是可以的，因为同一台电脑上基本上不存在数据丢失的情况，下面的案例实现了一个最小化的 domain socket 模型。</p>
        
          <div class="more-link">
            <a href="/2015/07/18/2015/2015-07-18_215259-790/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/07/18/2015/2015-07-18_213530-787/">socket 实现最小化UDP广播程序</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-07-18T21:35:30.000Z" itemprop="datePublished">
    2015-07-18
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E7%BD%91%E7%BB%9C/">网络</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>广播是某一个终端给一个子网发送数据，这个子网可以是本地的最小化子网，比如 192.168.1.255，也可以是整个子网 255.255.255.255，这取决于你要发送的范围，本文中只介绍一个最小化的广播程序，值得注意的是，即使客户端没有设定IP地址，它依然是可以接收到广播数据的。</p>
        
          <div class="more-link">
            <a href="/2015/07/18/2015/2015-07-18_213530-787/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2015/07/18/2015/2015-07-18_212408-784/">socket 实现最小化组播（多播）程序</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2015-07-18T21:24:08.000Z" itemprop="datePublished">
    2015-07-18
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E7%BD%91%E7%BB%9C/">网络</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>组播是在局域网中向一个子网内加入了某个组播组的客户端发送批量发送数据，它类似于广播但并非广播，组播的地址有固定的几种，本案例中使用了239.0.0.2这个组播地址，具体实现代码分客户端和服务端，请参考：</p>
        
          <div class="more-link">
            <a href="/2015/07/18/2015/2015-07-18_212408-784/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
</ul>

  <section id="nav-wrapper">
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/platform/Linux-Unix/">« prev</a><a class="page-number" href="/categories/platform/Linux-Unix/">1</a><span class="page-number current">2</span><a class="page-number" href="/categories/platform/Linux-Unix/page/3/">3</a><a class="page-number" href="/categories/platform/Linux-Unix/page/4/">4</a><a class="page-number" href="/categories/platform/Linux-Unix/page/5/">5</a><a class="extend next" rel="next" href="/categories/platform/Linux-Unix/page/3/">next »</a>
    </nav>
  </section>


            <footer>
    <div>© 2023 - Dylan </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>