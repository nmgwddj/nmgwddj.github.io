<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Dylan&#39;s blog</title>
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url(https://avatars.githubusercontent.com/u/13995319?v=4)">
        </div>
    </section>
    <section class='menu'>
        <div>Dylan&#39;s blog</div>
        
            <div>To the pursuit of truth.</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
    <header class='PageTitle'>
        <h1>{ Platform }</h1>
    </header>
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/08/05/2016/2016-08-05_103448-1765/">修改注册表解决 Win7 DbgView 不显示调试信息</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-08-05T10:34:48.000Z" itemprop="datePublished">
    2016-08-05
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E8%B0%83%E8%AF%95/">调试</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/%E9%A9%B1%E5%8A%A8/">驱动</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>默认情况下 Win7 系统使用 DebugView 无法查看到我们在驱动或者应用程序中打印的信息，如 <code>OutputDebugString</code>，<code>KdPrint</code> 等函数的输出。这需要在注册表中单独的设置使其可以打印相关信息。注册表如下：</p>
        
          <div class="more-link">
            <a href="/2016/08/05/2016/2016-08-05_103448-1765/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/07/30/2016/2016-07-30_190817-1756/">Win7x64 应用层（Ring3）实现文件及进程监控</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-07-30T19:08:17.000Z" itemprop="datePublished">
    2016-07-30
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E8%BF%9B%E7%A8%8B-%E7%BA%BF%E7%A8%8B/">进程/线程</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>以前在做网维行业的时候，会用很多监控工具用来监控文件或进程的创建过程，以此来协助解决一些问题。比如 Malware Defender、Process Moniter 等工具，这些工具功能强大但有一些局限性。比如 Malware Defender 不支持 64 位系统、Process Moniter 干扰信息太多等。所以最近自己刚好做 Hook 这块工作，学习着做了一个应用曾下监控文件及进程创建的工具，虽然是应用层监控，但是 Hook 的一些关键函数与 Malware Defender 是同样的。所以监控的效果是差不多的，且支持 64 位系统。但目前只能通过 DebugView 来查看输出的信息，后期我会做一个界面来查看输出信息。以下是效果截图：</p>
        
          <div class="more-link">
            <a href="/2016/07/30/2016/2016-07-30_190817-1756/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/07/23/2016/2016-07-23_220026-1751/">CString 与 DWORD IP 互相转换</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-07-23T22:00:26.000Z" itemprop="datePublished">
    2016-07-23
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E4%BD%8D%E6%93%8D%E4%BD%9C/">位操作</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/%E7%BD%91%E7%BB%9C/">网络</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>写网络程序的时候经常会用到 CString 和 DWORD 两种 IP 格式的转换，DWORD 是四个字节无符号类型，每一个字节来表示 IP 地址的点分的一位，理解了这个结构还要清楚网络字节序和本机字节序的概念，他们在内存中的表示方法刚好相反。如果你尚不清楚还请在本站搜索一下相关的关键字。下面示例程序演示了 CString 和 DWORD IP 地址的互相转换。</p>
        
          <div class="more-link">
            <a href="/2016/07/23/2016/2016-07-23_220026-1751/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/07/23/2016/2016-07-23_200019-1745/">Windows 字符串处理宏（适应与Unicode及多字节字符集）</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-07-23T20:00:19.000Z" itemprop="datePublished">
    2016-07-23
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/VisualStudio/">VisualStudio</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>如果你进入本文时，若对与 <code>多字节</code> <code>Unicode</code> <code>ASCII</code> 等这些概念上不清楚的话，请转到如下文章学习： API入门系列之一 -那‘烦人’的Windows数据类型 <a target="_blank" rel="noopener" href="http://blog.csdn.net/beyondcode/article/details/4015769">http://blog.csdn.net/beyondcode/article/details/4015769</a> API入门系列之二 -Unicode还是ASCII <a target="_blank" rel="noopener" href="http://blog.csdn.net/beyondcode/article/details/4018731">http://blog.csdn.net/beyondcode/article/details/4018731</a> API入门系列之三 -那迷惑人的Windows字符和字符指针类型 <a target="_blank" rel="noopener" href="http://blog.csdn.net/beyondcode/article/details/4021085">http://blog.csdn.net/beyondcode/article/details/4021085</a></p>
        
          <div class="more-link">
            <a href="/2016/07/23/2016/2016-07-23_200019-1745/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/07/23/2016/2016-07-23_190402-1715/">编译 EasyHook 32-bit/64-bit 静态库 Lib</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-07-23T19:04:02.000Z" itemprop="datePublished">
    2016-07-23
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/VisualStudio/">VisualStudio</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>EasyHook 是 Windows 平台下开源的 APIHOOK 工具库，因其开源有 64 位版本而注广为流传，微软也有提供 64 位 APIHOOK 的代码，但是要收费的。最近公司让我做一个 HOOK 的名单功能，顺便就研究了一下 EasyHook 的静态库编译和使用，也弥补一下曾经再这方面耗费的心血。下图是 HOOK 成功后 DebugView 的输出。</p>
        
          <div class="more-link">
            <a href="/2016/07/23/2016/2016-07-23_190402-1715/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/07/13/2016/2016-07-13_111130-1681/">Windows VS2015 编译 libssh2 1.7.0</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-07-13T11:11:30.000Z" itemprop="datePublished">
    2016-07-13
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/VisualStudio/">VisualStudio</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>最近公司要求做一个小工具，要求是通过程序连接 Linux 服务器，对服务器传送文件和执行命令。多次搜索后找到了比较适合的 <a target="_blank" rel="noopener" href="https://www.libssh2.org/">libssh2</a> 开源项目。但因为缺乏文档，一直没有编译成功。但最终经过多方搜索，还是成功在 VS2015 中将项目编译成功。特此写下详细步骤，希望能帮助各位。</p>
        
          <div class="more-link">
            <a href="/2016/07/13/2016/2016-07-13_111130-1681/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/06/24/2016/2016-06-24_151608-1649/">判断进程是32位还是64位（32、64位系统通用）</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-06-24T15:16:08.000Z" itemprop="datePublished">
    2016-06-24
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>前端时间做进程信息采集的一个工具，测试提交上来一个 Bug，在 XP 上所有采集的进程均为 64 位，我当时挺差异的，难道微软的 API 有问题？后来看了一下 <code>IsWow64Process</code> 函数第二个参数在 <a target="_blank" rel="noopener" href="https://msdn.microsoft.com/zh-cn/library/windows/desktop/ms684139(v=vs.85).aspx">MSDN 上的解释</a>：</p>
        
          <div class="more-link">
            <a href="/2016/06/24/2016/2016-06-24_151608-1649/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/06/16/2016/2016-06-16_135718-1644/">命令行从 FTP 获取一个目录及所有子目录文件</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-06-16T13:57:18.000Z" itemprop="datePublished">
    2016-06-16
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/FTP/">FTP</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Linux-Unix/">Linux/Unix</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>最近接了一个需求，主要是对 FTP 操作的一系列功能，中间遇到一个问题就是如何通过命令行方式从 FTP 下载一个文件夹到本地。搜索了一下 <a target="_blank" rel="noopener" href="http://man.linuxde.net/FTP">FTP 现有的命令</a>，无法实现将一个目录下所有子目录的文件都复制下来，<code>mget</code> 命令仅能下载文件，而不能下载目录。搜索后得知，可以通过 <code>wget</code> 命令来解决。一个示例如下：</p>
        
          <div class="more-link">
            <a href="/2016/06/16/2016/2016-06-16_135718-1644/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/05/10/2016/2016-05-10_103337-1598/">右键添加隐藏或显示系统隐藏文件</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-05-10T10:33:37.000Z" itemprop="datePublished">
    2016-05-10
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>我不喜欢长期显示着隐藏文件，这样看着目录结构比较乱，所以平时用的时候都是隐藏，而有的时候需要看一些隐藏的目录里面的内容，又需要显示出来，这样操作比较麻烦，所以在右键添加上 <code>显示/隐藏 系统隐藏文件</code> 功能，可以快速在某个目录下切换显示隐藏文件的状态，不必到资源管理器的菜单中再花几个步骤去调整了。在网上搜索了一些方法，下面是最靠谱的，只不过他是显示隐藏文件拓展名，我稍微修改了一下，成了显示和隐藏系统隐藏文件功能。</p>
        
          <div class="more-link">
            <a href="/2016/05/10/2016/2016-05-10_103337-1598/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2016/04/15/2016/2016-04-15_115203-1590/">重载 new、delete 检测内存泄露</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2016-04-15T11:52:03.000Z" itemprop="datePublished">
    2016-04-15
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/%E8%BF%9B%E7%A8%8B%E7%A9%BA%E9%97%B4/">进程空间</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/Windows/">Windows</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>内存泄露带来的问题我想我就不必多少了，检测内存泄露有很多种方法，比如使用一些智能指针。但本文介绍的方法有些不同，我们将自己维护一个数组列表，记录下 new 内存时代码所在的文件、行号、以及大小、和是否已经被 delete 信息，将这些信息放到我们维护的数组中，当程序要检查内存泄露或者程序退出时，我们遍历整个堆内存，并把每一个堆内存块在我们维护的数组中遍历，如果发现某些内存并没有被标记为 delete 状态，那么则判定为泄露。</p>
        
          <div class="more-link">
            <a href="/2016/04/15/2016/2016-04-15_115203-1590/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
</ul>

  <section id="nav-wrapper">
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/Platform/page/3/">« prev</a><a class="page-number" href="/categories/Platform/">1</a><a class="page-number" href="/categories/Platform/page/2/">2</a><a class="page-number" href="/categories/Platform/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/categories/Platform/page/5/">5</a><a class="page-number" href="/categories/Platform/page/6/">6</a><span class="space">&hellip;</span><a class="page-number" href="/categories/Platform/page/9/">9</a><a class="extend next" rel="next" href="/categories/Platform/page/5/">next »</a>
    </nav>
  </section>


            <footer>
    <div>© 2023 - Dylan </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>