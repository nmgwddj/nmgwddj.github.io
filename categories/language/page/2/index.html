<!DOCTYPE html>
<html lang="zh-cmn-Hans">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Dylan&#39;s blog</title>
  
  
  
  <!--link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css"-->
  
<link rel="stylesheet" href="//cdn.jsdelivr.net/highlight.js/9.10.0/styles/github-gist.min.css">

  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 6.3.0"></head>

<body>
<div class="Shell">
    <aside class='SideBar'>
    <section class='avatar' style="background-image: url()">
        <div class='av-pic' style="background-image: url(https://avatars.githubusercontent.com/u/13995319?v=4)">
        </div>
    </section>
    <section class='menu'>
        <div>Dylan&#39;s blog</div>
        
            <div>To the pursuit of truth.</div>
        
        <ul>
          
            <a href="/" class="Btn">
              <li>Home</li>
            </a>  
          
            <a href="/archives/" class="Btn">
              <li>Archive</li>
            </a>  
          
        </ul>
    </section>
    <section class="media">
        
    </section>
</aside>

    <div class="container">
        <div data-pager-shell>
            <ul class="Index">
  
    <header class='PageTitle'>
        <h1>{ language }</h1>
    </header>
  
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/07/11/2020/2020-07-11_151932-2941/">Qt Quick 5.15.0 Connections 新语法</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-07-11T15:19:32.000Z" itemprop="datePublished">
    2020-07-11
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Qt-Quick/">Qt Quick</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/QML/">QML</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>过去的 Connection 连接某个对象的信号时是这样写的：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Connections &#123;</span><br><span class="line">    target: authManager</span><br><span class="line">    onError: &#123;</span><br><span class="line">        busyContainer.visible = false</span><br><span class="line">        buttonJoin.enabled = Qt.binding(function () &#123;</span><br><span class="line">            return textMeetingId.length &gt;= 11 &amp;&amp; textNickname.length &gt; 0</span><br><span class="line">        &#125;)</span><br><span class="line">        message.error(result.msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>新的语法中可以这样写：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Connections &#123;</span><br><span class="line">    target: authManager</span><br><span class="line">    function onError(resCode, result) &#123;</span><br><span class="line">        busyContainer.visible = false</span><br><span class="line">        buttonJoin.enabled = Qt.binding(function () &#123;</span><br><span class="line">            return textMeetingId.length &gt;= 11 &amp;&amp; textNickname.length &gt; 0</span><br><span class="line">        &#125;)</span><br><span class="line">        message.error(result.msg)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于日常开发中，新的写法有助于我们定义槽函数的形参个数和实际作用。代码看起来更容易读懂。另外 Qt 官方文档中也介绍了一些其他好处，见：<a target="_blank" rel="noopener" href="https://doc.qt.io/qt-5/qml-qtqml-connections.html">Qt官方文档</a> 如果你使用 Qt 15.5.0 版本打开了一个旧的工程并使用的是旧的写法，那么会收到一个警告：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">qrc:/qml/AnonJoinPage.qml:54:5: QML Connections: Implicitly defined onFoo properties in Connections are deprecated. Use this syntax instead: function onFoo(&lt;arguments&gt;) &#123; ... &#125;</span><br></pre></td></tr></table></figure>

<p>既然是个警告，则不影响代码继续执行。但这样的警告不得不让你重写这部分代码来适配新的语法。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/07/11/2020/2020-07-11_134248-2938/">使用 CMake + Git Submodule 方式管理项目三方库</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-07-11T13:42:48.000Z" itemprop="datePublished">
    2020-07-11
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/CMake/">CMake</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/platform/">platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Platform/">Platform</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/iOS-macOS/">iOS/macOS</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/platform/iOS-macOS/Windows/">Windows</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>在项目开发过程中，避免不了要使用一些开源的三方库，我参加过的一些团队有不同的管理三方库的方式。不同的方式都各有优缺点，我们先列举一下碰到过的管理方式，说一些他们的优缺点，最后再来讨论我们今天介绍的管理方式弥补了哪些缺点。</p>
        
          <div class="more-link">
            <a href="/2020/07/11/2020/2020-07-11_134248-2938/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/02/17/2020/2020-02-17_204722-2915/">Qt Quick Windows 下实现无边框窗口阴影效果</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-02-17T20:47:22.000Z" itemprop="datePublished">
    2020-02-17
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Qt/">Qt</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/QML/">QML</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/QML/">QML</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>Qt Quick 中实现一个无边框窗口阴影效果的中心思想是将 Window 容器背景设置为透明的，在 Windows 容器中添加一个填满窗口的容器（如 Page、Rectangle 等），然后将这个容器设置一些边距，再给这个容器附加一个阴影效果，实现的效果如下： <strong>注意：本文所描述的方案会有严重的性能损耗，尤其是在 2k 4k 显示器上性能损耗严重、帧率极低，如非特殊需求，建议不使用类似方案。</strong></p>
        
          <div class="more-link">
            <a href="/2020/02/17/2020/2020-02-17_204722-2915/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/02/13/2020/2020-02-13_181930-2912/">Qt QML qtquickcontrols2.conf 使用系统未安装的自定义字体</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-02-13T18:19:30.000Z" itemprop="datePublished">
    2020-02-13
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Qt/">Qt</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/QML/">QML</a> }
  </li>

  <li class="meta-text">
  { <a href="/tags/Qt-Quick/">Qt Quick</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/QML/">QML</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>现在很多视觉设计最终给出的字体可能并不是所有系统都安装过的，所以项目中可能需要单独把字体文件打包进去在程序运行的时候加载。Qt QML 有多种方式加载一个自定义字体，本文将介绍所有我知道的方式，大家根据自己的需要选择使用任意一种即可。</p>
        
          <div class="more-link">
            <a href="/2020/02/13/2020/2020-02-13_181930-2912/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2020/01/27/2020/2020-01-27_223401-2896/">2020 新的开始</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2020-01-27T22:34:01.000Z" itemprop="datePublished">
    2020-01-27
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>2019 年是“进展缓慢”的一年，也是我人生中具有重要意义的一年，更是在经历了诸多波折后回到人生正常状态的一年。虽然还有很多遗憾（包括家庭、感情、工作），但我还是要感谢这一年所有遇到过的人和经历过的事情，这些都无形中让我慢慢走向一个三十而立的人。 我将原有的个人博客域名指向了这个站点，这也意味着未来只会维护这一个博客，这里会有我成长所有相关的内容。按照惯例，总结过去一年的得失，对未来做一个展望。人总是要前进，在前进的道路上才能发现生活的意义。</p>
        
          <div class="more-link">
            <a href="/2020/01/27/2020/2020-01-27_223401-2896/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/12/05/2019/2019-12-05_172233-2867/">解决 CEF 76+ 内核默认禁用 Flash 插件提示 “右键点击即可运行 Adobe Flash Player”</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-12-05T17:22:33.000Z" itemprop="datePublished">
    2019-12-05
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/CEF/">CEF</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>CEF 76+ 内核在编译后即使增加了 <code>ppapi-flash-path</code> 和 <code>ppapi-flash-version</code> 也无法在页面中使用 Flash，在命令行参数中确定两个参数是生效的，如图： <a href="/images/2019/12/2019-12-05_17-16-37.png"><img src="/images/2019/12/2019-12-05_17-16-37.png"></a></p>
        
          <div class="more-link">
            <a href="/2019/12/05/2019/2019-12-05_172233-2867/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/11/05/2019/2019-11-05_165045-2832/">Qt Quick QML MouseArea 事件穿透</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-11-05T16:50:45.000Z" itemprop="datePublished">
    2019-11-05
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Qt/">Qt</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/QML/">QML</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p><code>MouseArea</code> 是 QML 中一个不可见的鼠标操作区域，可响应所有鼠标事件。一般情况下在自定义按钮、自定义需要鼠标交互的区域时使用。有时你只需要它的 hover 通知来做一些事情，而另外的点击等操作需要传递给其下层的控件，这时你就需要忽略其自身的鼠标按下释放等操作让其消息传递到下层了。</p>
        
          <div class="more-link">
            <a href="/2019/11/05/2019/2019-11-05_165045-2832/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/11/05/2019/2019-11-05_145113-2824/">Qt Quick QML 中使用自定义字体文件</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-11-05T14:51:13.000Z" itemprop="datePublished">
    2019-11-05
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Qt/">Qt</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/QML/">QML</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>为了视觉上的统一，有时你需要保持 UI 上的字体与其他端字体一致，但是又不是所有字体所有系统都带有的，所以有时需要加载一个自定义字体来满足需求。本文重点介绍如何加载以及使用自定义字体。</p>
<h2 id="下载并导入字体"><a href="#下载并导入字体" class="headerlink" title="下载并导入字体"></a>下载并导入字体</h2><p>下载好你需要的字体文件后通过 Qt Creator 将字体文件导入到资源列表（这样字体会加载到执行程序中，执行程序会比较大）： <a href="/images/2019/11/2019-11-05_14-42-39-1.png"><img src="/images/2019/11/2019-11-05_14-42-39-1.png"></a> <a href="/images/2019/11/2019-11-05_14-43-01.png"><img src="/images/2019/11/2019-11-05_14-43-01.png"></a> 在导入完字体文件后，需要执行一下 qmake，在项目名称右键-&gt;执行qmake</p>
<h2 id="加载字体"><a href="#加载字体" class="headerlink" title="加载字体"></a>加载字体</h2><p>首先复制字体路径： <a href="/images/2019/11/2019-11-05_14-43-24.png"><img src="/images/2019/11/2019-11-05_14-43-24.png"></a> 在 main.qml 中增加如下代码（这样全局都可以访问到）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">FontLoader &#123;</span><br><span class="line">    id: localFont;</span><br><span class="line">    source: &quot;qrc:/fonts/PingFang.ttf&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>字体的 ID 自己随便定义，路径就是上图中拷贝出来的路径，保存后字体就加载成功了。</p>
<h2 id="使用字体"><a href="#使用字体" class="headerlink" title="使用字体"></a>使用字体</h2><p>在需要使用字体的位置像如下代码一样，使用 localFont.name 属性来获取字体名称：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Text &#123;</span><br><span class="line">    color: &quot;#333333&quot;</span><br><span class="line">    font.family: localFont.name</span><br><span class="line">    font.pixelSize: 14</span><br><span class="line">    textFormat: Text.PlainText</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样这个 Text 就使用了我们加载的 <code>PingFang</code> 字体了。</p>

      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/11/01/2019/2019-11-01_180003-2813/">Qt Quick 项目实现根据操作系统语言自动显示指定翻译</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-11-01T18:00:03.000Z" itemprop="datePublished">
    2019-11-01
  </time>
  
  | 
  <ul>
    
  <li class="meta-text">
  { <a href="/tags/Qt/">Qt</a> }
  </li>


  </ul>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/Language/">Language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/QML/">QML</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>Qt 提供了一整套的翻译引擎，讲你需要翻译的内容使用 qsTr(“”) 包括起来就可以通过工具来扫描这些待翻译的内容。我们用 Qt 创建的 Empty 项目来做演示，创建完成后，main.qml 中只有如下代码：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import QtQuick 2.12</span><br><span class="line">import QtQuick.Window 2.12</span><br><span class="line"></span><br><span class="line">Window &#123;</span><br><span class="line">    visible: true</span><br><span class="line">    width: 640</span><br><span class="line">    height: 480</span><br><span class="line">    title: qsTr(&quot;Hello World&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其中 Hello World 文字就使用 qsTr() 括起来了，我们首先需要做的就是让 Qt 翻译工具可以扫描到这些带翻译的文件。</p>
        
          <div class="more-link">
            <a href="/2019/11/01/2019/2019-11-01_180003-2813/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
    <li>
      <article class='ListView'>
    <header class="title">
      
        <h1>
          <a href="/2019/09/07/2019/2019-09-07_122712-2784/">编译最新版本 CEF（76.0.3809.132）包含 MP3 MP4 AVI FLV 多媒体支持</a>
        </h1>
      
      <div class='ListMeta'>
  <time datetime="2019-09-07T12:27:12.000Z" itemprop="datePublished">
    2019-09-07
  </time>
  
  
  / 
  <ul>
    
  <li class="meta-text">
  { <a href="/categories/language/">language</a> }
  </li>

  <li class="meta-text">
  { <a href="/categories/language/C-C/">C/C++</a> }
  </li>


  </ul>
  
</div>

    </header>
    <div>
      
        <p>本文将引导你使用 CEF 官方工具编译出目前（2019年9月5日）最新版本 CEF ，包含详细的步骤和常见问题，编译完成后的 CEF 具备完整功能的 cef_sandbox.lib 和完整的多媒体功能（如常用的 MP3 MP4 FLV AVI 等）支持。来吧，先让我们找一台高性能电脑。</p>
<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ol>
<li>安装 Visual Studio 2017 最新版本，安装时全部选择为默认路径</li>
<li>100G 以上 SSD 硬盘 + 高性能 CPU（如 Intel 8 系列以上带 K 的 CPU）内存建议 16G</li>
<li>设置系统虚拟内存页面文件大小为自动（否则可能会编译过程中报错）</li>
<li>一个稳定的 VPN 网络可以让你快速下载 CEF 和 Chromium 代码
        
          <div class="more-link">
            <a href="/2019/09/07/2019/2019-09-07_122712-2784/#more">Read On »</a>
          </div>
        
      
    </div>
</article>

    </li>
  
</ul>

  <section id="nav-wrapper">
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/categories/language/">« prev</a><a class="page-number" href="/categories/language/">1</a><span class="page-number current">2</span><a class="page-number" href="/categories/language/page/3/">3</a><a class="page-number" href="/categories/language/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/categories/language/page/23/">23</a><a class="extend next" rel="next" href="/categories/language/page/3/">next »</a>
    </nav>
  </section>


            <footer>
    <div>© 2023 - Dylan </div>
    <div>
        <span>
            Powered by <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a>
        </span>
        ,
        <span>
            Theme - <a target="_blank" rel="noopener" href="https://github.com/nameoverflow/hexo-theme-icalm">Icalm</a>
        </span>
    </div>
</footer>

        </div>
    </div>
</div>

<script src="/js/pager/dist/singlepager.js"></script>

<script>
var sp = new Pager('data-pager-shell')

</script>
</body>
</html>