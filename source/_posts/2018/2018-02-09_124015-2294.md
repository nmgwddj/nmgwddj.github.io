---
title: 使用七牛云对象储存缓存 wordpress 静态文件加速网站
tags:
  - wordpress
id: '2294'
categories:
  - - Tools
date: 2018-02-09 12:40:15
---

最近博客的访问量越来越大，导致使用阿里云的限制流量的云服务器超出了流量备关停，分析了以后大部分是一些下载的资源和图片资源占用的流量比较大。所以希望能把这些资源缓存起来，刚好最近经常用七牛云，发现有类似的功能。所以自己做了一下顺便记录一下步骤（网上大部分教程已经比较老，不太好与现在七牛云的对应了）
<!-- more -->
## 创建一个对象储存空间

首先你要有一个七牛云的帐号，帐号很好注册，注册完成后登录到后台，首先创建一个新的储存空间，如下图： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_121336.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_121336.png) 空间名自己随便定义，然后选择你希望这些缓存的信息在哪个地区，这个其实个人觉得无所谓。博客本身访问量就不稳定，各个地区都有，所以你选择任何一个都可能会有一部分地区打开速度稍微慢一点。所以根据自己需要选择吧。

## 修改镜像储存的镜像源

点击已经创建好的储存空间，找到镜像储存选项卡，输入你博客原有的域名然后保存，如下图： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_121404.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_121404.png)

## 安装并配置七牛云 wordpress 插件

我们需要安装两个插件来与七牛云连接，如果不想安装插件可以自己修改代码，其实插件和修改代码作用是一样的，所以看个人爱好。我选择了使用插件，两个插件分别如下：

*   WPJAM Basic：[https://wordpress.org/plugins/wpjam-basic/](https://wordpress.org/plugins/wpjam-basic/)
*   七牛镜像存储 WordPress 插件：[https://wordpress.org/plugins/wpjam-qiniu/](https://wordpress.org/plugins/wpjam-qiniu/)

[![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_121436.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_121436.png) 安装并启用插件后，在左侧菜单栏中就能看到七牛云储存的菜单了，点击七牛云储存->设置，进入设置页面： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_122835.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_122835.png) 在设置界面输入你的镜像储存的信息，如下图： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_122922.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_122922.png) 其中四个输入框所需的数据分别如下：

*   七牛域名

[![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123054.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123054.png)

*   七牛空间名，就是你创建的对象储存的空间名，我的名字是 mycode
*   ACCESS KEY 和 SECRET KEY

[![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123240.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123240.png) 这样配置以后，你重新访问自己的网站，然后查看一下图片的源地址，已经变成了七牛云提供的那个测试域名的地址了，如下图： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123430.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123430.png) 与此同时，我们在七牛云创建的储存空间中也可以看到被缓存的信息了： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123530.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123530.png)

## 其他设置

默认情况下，插件的设置只缓存 `jscsspngjpgjpeggifico` 文件，如果你要添加缓存其他后缀名的文件，比如 `.zip` `.rar` 等，可以自己进入七牛云插件设置中进行修改，如下图： [![](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123726.png)](http://www.mycode.net.cn/wp-content/uploads/2018/02/2018-02-09_123726.png)