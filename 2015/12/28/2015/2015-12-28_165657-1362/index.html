<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Dylan,2894220@qq.com"><title>Meteor 开发环境 mongodb 的连接 · Dylan's blog</title><meta name="description" content="本文主要总结一下在使用 Meteor 开发过程中对 mongodb 数据库的管理。其中包含使用命令行终端（meteor shell）进行管理，还有图形化界面的工具 Robomongo 工具。

预备知识当使用 meteor 命令启动 meteor 项目后，meteor 会默认使用 3000 端口作为"><meta name="keywords" content="Hexo,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 8.1.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Dylan's blog</a></h3><div class="description"><p>To the pursuit of truth.</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="http://github.com/nmgwddj"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai </a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Meteor 开发环境 mongodb 的连接</a></h3></div><div class="post-content"><p>本文主要总结一下在使用 Meteor 开发过程中对 mongodb 数据库的管理。其中包含使用命令行终端（meteor shell）进行管理，还有图形化界面的工具 Robomongo 工具。</p>
<span id="more"></span>
<h3 id="预备知识"><a href="#预备知识" class="headerlink" title="预备知识"></a>预备知识</h3><p>当使用 meteor 命令启动 meteor 项目后，meteor 会默认使用 <code>3000</code> 端口作为 web 项目的端口，我们可以通过 <a target="_blank" rel="noopener" href="http://domainname:3000/">http://domainName:3000/</a> 这样的地址来访问我们的网站。而数据库所使用的端口，则是在这个端口基础上 +1，就是 <code>3001</code> 端口。也就是说，如果你指定启动 meteor 项目时使用了其他端口，比如 <code>meteor -p 8000</code>，那么 mongodb 的数据库连接端口就是 <code>8001</code>。</p>
<h3 id="使用-meteor-shell-进行管理"><a href="#使用-meteor-shell-进行管理" class="headerlink" title="使用 meteor shell 进行管理"></a>使用 meteor shell 进行管理</h3><p>通过 meteor shell 管理 mongodb 不需要指定端口，你只要在 meteor 项目启动后的项目目录下执行 <code>meteor mongo</code> 就可以连接到数据库了。如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">myCode:~/Project/microduino$ meteor mongo</span><br><span class="line">MongoDB shell version: 2.6.7</span><br><span class="line">connecting to: 127.0.0.1:3001/meteor</span><br><span class="line">meteor:PRIMARY&gt;</span><br></pre></td></tr></table></figure>

<p>这样就连接到了当前项目的 mongodb 数据库，通过 <code>help</code> 命令可以看到帮助。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">meteor:PRIMARY&gt; help</span><br><span class="line">    db.help()                    help on db methods</span><br><span class="line">    db.mycoll.help()             help on collection methods</span><br><span class="line">    sh.help()                    sharding helpers</span><br><span class="line">    rs.help()                    replica set helpers</span><br><span class="line">    help admin                   administrative help</span><br><span class="line">    help connect                 connecting to a db help</span><br><span class="line">    help keys                    key shortcuts</span><br><span class="line">    help misc                    misc things to know</span><br><span class="line">    help mr                      mapreduce</span><br><span class="line"></span><br><span class="line">    show dbs                     show database names</span><br><span class="line">    show collections             show collections in current database</span><br><span class="line">    show users                   show users in current database</span><br><span class="line">    show profile                 show most recent system.profile entries with time &gt;= 1ms</span><br><span class="line">    show logs                    show the accessible logger names</span><br><span class="line">    show log [name]              prints out the last segment of log in memory, &#x27;global&#x27; is default</span><br><span class="line">    use &lt;db_name&gt;                set current database</span><br><span class="line">    db.foo.find()                list objects in collection foo</span><br><span class="line">    db.foo.find( &#123; a : 1 &#125; )     list objects in foo where a == 1</span><br><span class="line">    it                           result of the last line evaluated; use to further iterate</span><br><span class="line">    DBQuery.shellBatchSize = x   set default number of items to display on shell</span><br><span class="line">    exit                         quit the mongo shell</span><br></pre></td></tr></table></figure>

<p>通过 <code>show dbs</code> 命令可以查看当前的数据库列表。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">meteor:PRIMARY&gt; show dbs</span><br><span class="line">admin   (empty)</span><br><span class="line">local   0.063GB</span><br><span class="line">meteor  0.031GB</span><br></pre></td></tr></table></figure>

<p>上面我们看到，有一个名为 <code>meteor</code> 占用 0.031GB 的空间，使用命令 <code>use meteor</code> 选择它，然后使用命令 <code>show collections</code> 查看所有数据库。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">meteor:PRIMARY&gt; use meteor</span><br><span class="line">switched to db meteor</span><br><span class="line">meteor:PRIMARY&gt; show collections</span><br><span class="line">Accounts</span><br><span class="line">AnalyticsEvents</span><br><span class="line">Articles</span><br><span class="line">Cards</span><br><span class="line">Cart</span><br><span class="line">Discounts</span><br><span class="line">Orders</span><br><span class="line">Packages</span><br><span class="line">Products</span><br><span class="line">Sessions</span><br><span class="line">Shipping</span><br><span class="line">Shops</span><br><span class="line">Tags</span><br><span class="line">Taxes</span><br><span class="line">Translations</span><br><span class="line">cfs.Images.filerecord</span><br><span class="line">cfs._tempstore.chunks</span><br><span class="line">cfs_gridfs._tempstore.chunks</span><br><span class="line">cfs_gridfs._tempstore.files</span><br><span class="line">friends</span><br><span class="line">meteor_accounts_loginServiceConfiguration</span><br><span class="line">meteor_oauth_pendingCredentials</span><br><span class="line">meteor_oauth_pendingRequestTokens</span><br><span class="line">modules</span><br><span class="line">oldUsers</span><br><span class="line">roles</span><br><span class="line">system.indexes</span><br><span class="line">users</span><br></pre></td></tr></table></figure>

<p>如果要对数据库进行查询，那么此时你就可以使用命令 <code>db.collectionName.find(...);</code> 来操作了。下面我们来介绍图形化界面的 Robomongo。</p>
<h3 id="使用-Robomongo-管理数据库"><a href="#使用-Robomongo-管理数据库" class="headerlink" title="使用 Robomongo 管理数据库"></a>使用 Robomongo 管理数据库</h3><p>下载地址：<a target="_blank" rel="noopener" href="http://robomongo.org/">http://robomongo.org/</a> 安装完成后，配置连接属性，程序刚打开的时候一片空白，我们要手动点右键 Add 一个新的连接。 <a href="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.09.31.png"><img src="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.09.31-1024x669.png" alt="屏幕快照 2015-12-28 16.09.31"></a> 输入 mongodb 的连接信息，记住这个端口，要根据你项目启动的端口来决定的。 <a href="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.09.59.png"><img src="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.09.59-1024x609.png" alt="屏幕快照 2015-12-28 16.09.59"></a> 保存后点击 Connect 连接 <a href="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.10.24.png"><img src="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.10.24-1024x671.png" alt="屏幕快照 2015-12-28 16.10.24"></a> 连接上以后，就可以通过 <code>meteor-&gt;Collections</code> 看到所有的数据库信息了 <a href="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.10.51.png"><img src="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.10.51-1024x711.png" alt="屏幕快照 2015-12-28 16.10.51"></a> 如果想执行查询、更新等语句，可以双击一个数据库，再右侧数据列表的上方输入查询语句 <a href="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.55.09.png"><img src="/images/2015/12/%E5%B1%8F%E5%B9%95%E5%BF%AB%E7%85%A7-2015-12-28-16.55.09-1024x712.png" alt="屏幕快照 2015-12-28 16.55.09"></a></p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2015-12-28</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Database/" title="Database">Database </a><a class="tag" href="/tags/meteor/" title="meteor">meteor </a><a class="tag" href="/tags/mongodb/" title="mongodb">mongodb </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://nmgwddj.github.io/2015/12/28/2015/2015-12-28_165657-1362/,Dylan's blog,Meteor 开发环境 mongodb 的连接,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2016/01/01/2016/2016-01-01_165517-1371/" title="Sublime text 3 最新 Meteor 代码提示插件">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2015/12/26/2015/2015-12-26_184813-1314/" title="Meteor 分页包 alethes:pages 详解">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>