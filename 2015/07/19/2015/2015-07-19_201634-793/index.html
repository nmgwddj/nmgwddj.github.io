<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Dylan,2894220@qq.com"><title>oracle 下一些零散的命令和 sql 语句 · Dylan's blog</title><meta name="description" content="以前学过一些数据库相关的知识，回想起来刚入门还是看了传智播客的视频，杨忠科老师的sql语句教程。现在已经好多年了，中间自己也不断的在用，但是一直没有提高，只是会简单增删改查，今天学的 cast..then..等等都没怎么用过，所以记录一下没有学到过的内容，以后备用。


  &amp;#x2F;&amp;#x2F;"><meta name="keywords" content="Hexo,HTML,CSS,android,Linux"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"><meta name="generator" content="Hexo 7.3.0"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Dylan's blog</a></h3><div class="description"><p>To the pursuit of truth.</p></div></div></div><ul class="social-links"><li><a target="_blank" rel="noopener" href="http://github.com/nmgwddj"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a target="_blank" rel="noopener" href="https://www.caicai.me"> CaiCai </a><span>&</span><a target="_blank" rel="noopener" href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>oracle 下一些零散的命令和 sql 语句</a></h3></div><div class="post-content"><p>以前学过一些数据库相关的知识，回想起来刚入门还是看了传智播客的视频，杨忠科老师的sql语句教程。现在已经好多年了，中间自己也不断的在用，但是一直没有提高，只是会简单增删改查，今天学的 cast..then..等等都没怎么用过，所以记录一下没有学到过的内容，以后备用。</p>
<span id="more"></span>
<hr>
<p>  <strong>&#x2F;&#x2F; 查看所有表</strong></p>
<p>select * from tab;</p>
<p><strong>&#x2F;&#x2F; 查看表字段</strong></p>
<p>desc emp;</p>
<p><strong>&#x2F;&#x2F; 清屏</strong></p>
<p>host cls</p>
<p><strong>&#x2F;&#x2F; 执行上一次执行过的语句</strong></p>
<p>&#x2F;</p>
<p><strong>&#x2F;&#x2F; 修改列宽度</strong> col 列名 for a20（字符串） col 列名 for 99999（数字）</p>
<p><strong>&#x2F;&#x2F; 修改错误的sql语句</strong> 跳转到指定错误行 1 修改指定数据 <strong>c</strong> &#x2F;form&#x2F;from 使用<strong>ed</strong>命令，弹出系统默认的编辑器 <strong>&#x2F;&#x2F; 去重</strong> select <strong>distinct</strong> job from emp;</p>
<p><strong>&#x2F;&#x2F; 表达式中使用可能为NULL值的处理办法</strong> 在表达式中如果使用了带有NULL的操作数，那么整个表达式的结果也是NULL，如果想避免这种情况，可以使用如下函数 <strong>nvl(comm, 0)</strong> 意思就是如果comm是NULL的情况下，那么给其返回0</p>
<p><strong>&#x2F;&#x2F; 连接两个字符串和伪表 dual</strong> select ‘hello ‘ ‘world’ as “hello” from dual; select <strong>concat</strong>(‘hello ‘, ‘world’) as “hello” from dual;</p>
<p><strong>&#x2F;&#x2F; 查询1250到3000之间的数据,包含1250和3000</strong> between 1250 and 3000</p>
<p><strong>&#x2F;&#x2F; 查询 10 或者 20 的数据</strong> select * from emp where <strong>deptno</strong> &#x3D; 10 or <strong>deptno</strong> &#x3D; 20;select * from emp where deptno in (10, 20);select * from emp where deptno not in (10, 20);select * from emp where comm in (300, 500, NULL) select * from emp where comm not in (300, 500, NULL)     <strong>&#x2F;&#x2F; 不允许的</strong> <strong>&#x2F;&#x2F; 查询带有下划线的字段</strong> select * from emp where ename like ‘%<strong>\_</strong>%’ <strong>escape ‘\‘</strong>     &#x2F;&#x2F; 重要的是escape告诉sql语句是用\转义 <strong>&#x2F;&#x2F; sql语句解析方式，自右向左解析，一般把and右侧的写比较容易出错的条件，这样右侧出错后就不用再判断左侧了，or也是同样道理</strong> <strong>&#x2F;&#x2F; order by 可以根据字段序号排列</strong> select ename, deptno, sal, sal * 12 from emp order by 2 desc <strong>&#x2F;&#x2F; order by 可以同时作用多个列</strong> select ename, deptno, sal, sal * 12 from emp order by 2 desc, sal desc <strong>&#x2F;&#x2F; order by 对 null 的处理</strong> select ename, deptno, sal, sal * 12, comm from emp order by comm desc nulls last <strong>&#x2F;&#x2F; 日期格式化</strong> select to_char(sysdate + 1, ‘yyyy-mm-dd hh24:mi:ss’) from dual; select round((sysdate - hiredate) &#x2F; 365) from emp; <strong>*不允许日期相加*</strong> <strong>&#x2F;&#x2F; 两个日期相差的月数</strong> select ename, hiredate, <strong>months_between</strong>(sysdate, hiredate) &#x2F; 12 from emp; <strong>&#x2F;&#x2F; 在某日期上加上多少个月</strong> select to_char(<strong>add_months</strong>(sysdate, 95), ‘yyyy-mm-dd hh24:mi:ss’) from dual; <strong>&#x2F;&#x2F; 日期所在月的最后一天</strong> select to_char(<strong>last_day</strong>(sysdate), ‘yyyy-mm-dd hh24:mi:ss’) from dual; <strong>&#x2F;&#x2F; 返回指定的下一个日期</strong> select to_char(<strong>next_day</strong>(sysdate, ‘星期日’), ‘yyyy-mm-dd hh24:mi:ss’) from dual; <strong>&#x2F;&#x2F; 转换函数</strong> date-&gt;char,number-&gt;char to_char char-&gt;date to_date char-&gt;number to_number <strong>&#x2F;&#x2F; 时间转换练习</strong> select to_char(sysdate, ‘yyyy-mm-dd hh24:mi:ss’) ‘ 今天是 ‘ to_char(sysdate, ‘day’) from dual; select to_char(sysdate, ‘yyyy-mm-dd hh24:mi:ss “今天是” day’) from dual; select to_date(‘2015-07-19 16:50:50 今天是 星期日’, ‘yyyy-mm-dd hh24:mi:ss “今天是” day’) from dual; <strong>&#x2F;&#x2F; 使用转换函数时一些代替值</strong> 9     数字 0     零 $     美元 L     本地货币符号 .     小数点 ,     千位符</p>
<p>select to_char(sal, ‘<strong>L99,999.99</strong>‘) as “sal” from emp;</p>
<p>返回结果</p>
<p>sal ——————– ￥2,850.00</p>
<p><strong>&#x2F;&#x2F; case when 语法</strong> select ename, job, sal as “张前薪水”, <strong>case</strong> job <strong>when</strong> ‘PRESIDENT’ then sal + 1000 <strong>when</strong> ‘MANAGER’ then sal + 800 <strong>else</strong> sal + 400 <strong>end</strong> as “涨后薪水” from emp order by “涨后薪水” desc; <strong>&#x2F;&#x2F; decode 函数，第一个和最后一个参数以外，中间的都是过滤条件</strong> select ename, job, sal as “张前薪水”, <strong>decode</strong>(job, ‘PRESIDENT’, sal + 1000, ‘MANAGER’, sal + 800, sal + 400) as “涨后薪水” from emp order by “涨后薪水” desc;</p>
<p><strong>&#x2F;&#x2F; 字符串转小写</strong></p>
<p>select lower(‘HELLO’) from dual;</p>
<p>结果：hello</p>
<p><strong>&#x2F;&#x2F; 字符串转大写</strong></p>
<p>select <strong>upper</strong>(‘hello’) from dual;</p>
<p>结果：HELLO</p>
<p><strong>&#x2F;&#x2F; 首字母大写</strong></p>
<p>select <strong>initcap</strong>(‘what is your name’) from dual;</p>
<p>结果：What Is Your Name</p>
<p><strong>&#x2F;&#x2F; 字符串连接函数</strong></p>
<p>select <strong>concat</strong>(‘hello’, ‘ world’) from dual;</p>
<p>结果：hello world</p>
<p><strong>&#x2F;&#x2F; 截取字符串部分内容</strong></p>
<p>select <strong>substr</strong>(‘hello world’, 3) from dual;          &#x2F;&#x2F; 从第3位开始一直到字符串最后</p>
<p>结果：llo world</p>
<p>select <strong>substr</strong>(‘hello world’, 3, 5) from dual;      &#x2F;&#x2F; 从第3位开始截取5个字符</p>
<p>结果：llo w</p>
<p><strong>&#x2F;&#x2F; 获取字符串长度和所用字节数</strong></p>
<p>select <strong>length</strong>(‘hello world’) from dual;</p>
<p>结果：11</p>
<p>select <strong>lengths</strong>(‘hello world’) from dual;</p>
<p>结果：8</p>
<p><strong>&#x2F;&#x2F; 查找一个字符串中是否包含一个子串</strong></p>
<p>select <strong>instr</strong>(‘hello world’, ‘wor’) from dual;</p>
<p>结果：7（子串第一个字母的位置）</p>
<p>没找到返回0</p>
<p><strong>&#x2F;&#x2F; 填充字符串</strong></p>
<p>select <strong>lpad</strong>(‘hello’, 20, ‘*‘) from dual;</p>
<p>结果：***************hello          &#x2F;&#x2F; 最后结果字节数是第二个参数指定的数字</p>
<p>select <strong>rpad</strong>(‘hello’, 20, ‘^’) from dual;</p>
<p>结果：hello^^^^^^^^^^^^^^^     &#x2F;&#x2F; 同上</p>
<p><strong>&#x2F;&#x2F; 删除字符串开头和末尾的内容</strong></p>
<p>select <strong>trim</strong>(‘H’ from ‘HellHo worldHH’) from dual;</p>
<p>结果：ellHo world          &#x2F;&#x2F; 注意中间的是不删除的</p>
<p><strong>&#x2F;&#x2F; 替换字符串内容</strong></p>
<p>select <strong>replace</strong>(‘hello world’, ‘l’, ‘*‘) from dual;</p>
<p>结果：he**o wor*d</p>
<p><strong>&#x2F;&#x2F; 四舍五入</strong></p>
<p>select <strong>round</strong>(45.29, 1) from dual;</p>
<p>结果：45.3</p>
<p>select <strong>round</strong>(45.29) from dual;</p>
<p>结果：45</p>
<p>select <strong>round</strong>(45.29, -1) from dual; 结果：50</p>
<p><strong>&#x2F;&#x2F; 截断</strong></p>
<p>select <strong>trunc</strong>(15.789, 2) from dual;</p>
<p>结果：15.78</p>
<p>select <strong>trunc</strong>(15.789, 1) from dual;</p>
<p>结果：15.7</p>
<p>select <strong>trunc</strong>(15.789) from dual;</p>
<p>结果：15</p>
<p>select <strong>trunc</strong>(15.789, -1) from dual;</p>
<p>结果：10</p>
<p><strong>&#x2F;&#x2F; 求余</strong></p>
<p>select <strong>mod</strong>(100, 30) from dual;</p>
<p>结果：10</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2015-07-19</span><i class="fa fa-tag"></i><a class="tag" href="/categories/Database/" title="Database">Database </a><a class="tag" href="/tags/oracle/" title="oracle">oracle </a></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" target="_blank" rel="noopener" href="http://twitter.com/home?status=,https://nmgwddj.github.io/2015/07/19/2015/2015-07-19_201634-793/,Dylan's blog,oracle 下一些零散的命令和 sql 语句,;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/2015/07/20/2015/2015-07-20_200553-801/" title="select 进阶查询语句">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/2015/07/18/2015/2015-07-18_215259-790/" title="Linux/unix下的IPC-UNIX Domain Socket">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>